# 路径编辑宏命令测试指南

## 测试步骤

### 1. 创建测试图形
1. 启动 VectorQt 应用程序
2. 使用矩形工具创建 2-3 个重叠的矩形
3. 确保矩形有重叠部分，可以进行布尔运算

### 2. 测试布尔运算宏命令
1. 选择所有矩形
2. 使用路径编辑菜单 → 路径联合
3. 观察：应该创建一个合并后的路径
4. 按 Ctrl+Z 撤销：应该恢复所有原始矩形
5. 按 Ctrl+Y 重做：应该重新执行联合操作

### 3. 验证宏命令特性
- **原子性**：撤销应该一次性恢复所有原始图形，而不是部分恢复
- **命令文本**：撤销历史中应该显示"路径联合"而不是多个独立命令
- **对象生命周期**：撤销时原始对象应该正确恢复，包括位置和样式

### 4. 测试其他布尔运算
- 路径减去
- 路径相交  
- 路径异或

### 5. 对比测试
- 与旧版本对比：旧版本可能出现撤销后对象引用失效
- 新版本应该：撤销重做稳定，无崩溃，对象完整

## 预期结果

### ✅ 正常行为
```
操作序列：
1. 选择矩形A、矩形B → 路径联合
2. 撤销 → 矩形A、矩形B 恢复
3. 重做 → 联合路径重新出现

撤销历史：
- 路径联合 (1个命令)
```

### ❌ 问题行为（旧版本）
```
操作序列：
1. 选择矩形A、矩形B → 路径联合
2. 撤销 → 部分恢复或崩溃
3. 重做 → 对象引用失效

撤销历史：
- 删除矩形A
- 删除矩形B  
- 创建联合路径
```

## 调试信息

在控制台中查找以下关键信息：
- "CommandManager::beginMacro called with: 路径联合"
- "CommandManager::endMacro called"
- "移除原始图形" 和 "创建结果路径" 命令的执行